# 字段不匹配自动容错修复

## 问题描述
用户反馈即使更新了映射表，依然出现 `no column named additives` 错误。且由于陶器抽取失败，后续的玉器抽取也未执行。

## 根本原因
1.  **Prompt 与 DB 不一致**：LLM 严格遵循 Prompt 返回了 `additives` 字段，而数据库只有 `mixed_materials`。
2.  **缺乏容错机制**：代码直接将 LLM 返回的所有 Key 用于构建 SQL 插入语句，一旦有未知字段，SQL 执行就会失败。
3.  **流程中断**：陶器抽取抛出异常，导致整个任务流程终止，后续玉器抽取被跳过。

## 修复方案
在 `src/database_manager_v3.py` 中实现了 **动态字段过滤机制**。

1.  **新增 `_filter_valid_data` 方法**：
    *   在插入数据前，先查询数据库表的实际列名。
    *   自动过滤掉所有不在表结构中的字段。
    *   打印警告日志，记录被忽略的字段（如 `additives`）。

2.  **应用范围**：
    *   `insert_pottery`
    *   `insert_jade`
    *   （注：`insert_site` 和 `insert_period` 使用硬编码 SQL，本来就是安全的）

## 预期效果
1.  **任务不再崩溃**：即使 LLM 返回了 `additives` 或其他未知字段，系统会自动忽略，继续插入其他有效数据。
2.  **玉器正常抽取**：陶器流程完成后，会自动继续执行玉器抽取。
3.  **系统更健壮**：未来模板变动或 LLM 幻觉生成的字段都不会导致系统崩溃。

---

**请重新运行任务验证。这次应该能顺利跑完所有流程！** 🚀

