# 修复报告：Prompt优化、Jade映射修复、时间显示

## 1. 提示词优化 (Prompt Optimization)

根据建议，对 `src/prompt_generator.py` 进行了以下改进：

1.  **引入字段说明**：现在生成的 Prompt 会包含 Excel 模板中定义的字段“说明/备注”信息。
    *   *效果*：LLM 能更准确地理解复杂字段的含义。
2.  **增强语义理解指令**：在 Prompt 的“注意事项”中明确添加了语义理解指令：
    *   *指令内容*：`语义理解: 字段名称可能与文本描述不完全一致。请根据上下文理解含义。例如，“物件开口处直径”应提取为“口径”；“器高”应提取为“高度”。`
    *   *效果*：提高了对非标准描述的抽取能力，不再局限于严格的关键词匹配。

## 2. 玉器抽取报错修复 (Fix Jade Extraction Error)

**问题**：`table jade_artifacts has no column named 单品编码`
**原因**：`FieldMapper` 中的中英文映射字典方向反了（原本是 En->Cn，导致无法将 LLM 返回的中文 Key 转换为数据库的英文 Column）。
**修复**：在 `src/field_mapper.py` 中反转了映射字典。
**验证**：测试脚本确认 `单品编码` 现在能正确映射为 `artifact_code`。

## 3. GUI 时间显示修正 (Fix GUI Time Display)

**问题**：任务时间和日志时间与系统时间不一致（显示为 UTC 时间）。
**修复**：在 `gui/app_v3.py` 中添加了时间转换逻辑，将数据库中的 UTC 时间转换为本地时间（UTC+8）。

---

**所有问题已修复！请重新运行抽取任务进行验证。** 🚀

